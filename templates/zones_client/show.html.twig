{% extends 'base.html.twig' %}

{% block title %}Zone —
	{{ zones_client.nom }}
{% endblock %}

{% block body %}
	<div class="page-header">
		<div>
			<h1>{{ zones_client.nom }}</h1>
			<p class="text-muted text-sm">{{ zones_client.sitesClient.client.nom }}
				—
				{{ zones_client.sitesClient.nom }}</p>
		</div>
		<div class="btn-group">
			<a href="{{ path('app_support_client_new', {'zone_id': zones_client.id}) }}" class="btn btn-primary">Ajouter un support</a>
			<a href="{{ path('app_zones_client_edit', {'id': zones_client.id}) }}" class="btn btn-secondary">Modifier</a>
		</div>
	</div>

	<div class="card">
		<ul class="info-list">
			<li>
				<span class="info-label">Type de zone :</span>
				<span>{{ zones_client.typeZone ? zones_client.typeZone.nom : 'Sans type' }}</span>
			</li>
			<li>
				<span class="info-label">Site :</span>
				<span>{{ zones_client.sitesClient.nom }}</span>
			</li>
			<li>
				<span class="info-label">Client :</span>
				<a href="{{ path('app_client_show', {'id': zones_client.sitesClient.client.id}) }}">{{ zones_client.sitesClient.client.nom }}</a>
			</li>
		</ul>

		<hr>

		<h3>Supports</h3>
		{% if zones_client.supportClients|length > 0 %}
			<ul class="info-list">
				{% for support in zones_client.supportClients %}
					<li>
						<span class="info-label">Support :</span>
						<span>{{ support.typeSupport.nom }}</span>
					</li>
				{% endfor %}
			</ul>
		{% else %}
			<p class="text-muted text-sm">Aucun support pour cette zone</p>
		{% endif %}
	</div>
    {{ include('zones_client/_delete_form.html.twig') }}
    
    <section class="dashboard-actions">
    <a class="dashboard-action" href="{{ path('app_intervention_new', {'zones_client_id': zones_client.id}) }}">
        <strong>Ajouter une intervention</strong>
        <span>Créer une nouvelle intervention pour {{ zones_client.sitesClient.client.nom }}, sur le site {{ zones_client.sitesClient.nom }} dans la zone {{ zones_client.nom }}{% if zones_client.sitesClient.contrats|length > 0 %} pour le contrat {{ zones_client.sitesClient.contrats.first.numero }}{% endif %}.</span>
    </a>
    </section>
	<div class="btn-group mt-3">
		<a href="{{ path('app_client_show', {'id': zones_client.sitesClient.client.id}) }}" class="btn btn-secondary">← Retour au client</a>
		{{ include('zones_client/_delete_form.html.twig') }}
	</div>
{% endblock %}
