<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			{% block title %}EasyCleanESAT
			{% endblock %}
		</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ðŸ§¹</text></svg>">
		<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Outfit:wght@600;700;800&display=swap" rel="stylesheet">
		{% block stylesheets %}
			<style>:root
			{
				--font-body: 'DM Sans', system-ui, sans-serif;
				--font-heading: 'Outfit', system-ui, sans-serif;

				--color-bg: #e8ecf1;
				--color-surface: #dde2ea;
				--color-surface-hover: #d5dae3;
				--color-text: #1a1d23;
				--color-text-secondary: #3e4a58;
				--color-border: #c5ccd7;

				--color-primary: #3b6d98;
				--color-primary-hover: #2d5577;
				--color-primary-light: #c8d9e8;
				--color-primary-soft: #adc4d9;

				--color-success: #059669;
				--color-warning: #d97706;
				--color-danger: #c53030;
				--color-danger-light: #f8d0d0;

				--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
				--shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);

				--radius-md: 10px;
				--radius-lg: 14px;
				--radius-xl: 20px;
				--transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			}

			*,
			*::before,
			*::after {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}
			html {
				font-size: 16px;
				scroll-behavior: smooth;
			}

			body {
				font-family: var(--font-body);
				color: var(--color-text);
				background: var(--color-bg);
				line-height: 1.6;
				min-height: 100vh;
				-webkit-font-smoothing: antialiased;
			}

			.app-shell {
				min-height: 100vh;
				display: flex;
				flex-direction: column;
			}
			.container {
				width: min(1140px, 100% - 2rem);
				margin-inline: auto;
			}

			/* ===== HEADER ===== */
			.app-header {
				position: sticky;
				top: 0;
				z-index: 100;
				background: rgba(40, 58, 78, 0.96);
				backdrop-filter: blur(12px);
				border-bottom: 1px solid rgba(255, 255, 255, 0.06);
			}
			.app-header__inner {
				height: 64px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				gap: 1rem;
			}
			.app-brand {
				font-family: var(--font-heading);
				font-size: 1.15rem;
				font-weight: 700;
				color: #fff;
				text-decoration: none;
				letter-spacing: -0.02em;
				white-space: nowrap;
			}
			.app-brand:hover {
				color: rgba(255, 255, 255, 0.85);
			}

			.header-search {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				flex: 0 1 380px;
			}
			.header-search input {
				flex: 1;
				height: 38px;
				padding: 0 0.75rem;
				border: 1px solid rgba(255, 255, 255, 0.15);
				border-radius: var(--radius-md);
				background: rgba(255, 255, 255, 0.1);
				font: inherit;
				font-size: 0.875rem;
				color: #fff;
				transition: all var(--transition);
			}
			.header-search input::placeholder {
				color: rgba(255, 255, 255, 0.5);
			}
			.header-search input:focus {
				outline: none;
				background: rgba(255, 255, 255, 0.18);
				border-color: rgba(255, 255, 255, 0.3);
			}
			.header-search .btn {
				background: rgba(255, 255, 255, 0.15);
				color: #fff;
				border: 1px solid rgba(255, 255, 255, 0.2);
			}
			.header-search .btn:hover {
				background: rgba(255, 255, 255, 0.25);
				color: #fff;
			}

			.header-nav {
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}
			.header-nav .btn {
				color: rgba(255, 255, 255, 0.85);
				border-color: rgba(255, 255, 255, 0.2);
				background: transparent;
			}
			.header-nav .btn:hover {
				background: rgba(255, 255, 255, 0.1);
				color: #fff;
			}

			/* ===== MAIN ===== */
			.app-main {
				flex: 1;
				padding: 2rem 0 3rem;
			}

			/* ===== FOOTER ===== */
			.app-footer {
				border-top: 1px solid var(--color-border);
				background: rgba(40, 58, 78, 0.96);
				padding: 1.25rem 0;
				text-align: center;
				color: rgba(255, 255, 255, 0.6);
				font-size: 0.85rem;
			}

			/* ===== TYPOGRAPHY ===== */
			h1,
			h2,
			h3,
			h4 {
				font-family: var(--font-heading);
				color: var(--color-primary-hover);
				line-height: 1.25;
				letter-spacing: -0.025em;
			}
			h1 {
				font-size: 1.875rem;
				margin-bottom: 0.5rem;
			}
			h2 {
				font-size: 1.375rem;
				margin-bottom: 0.5rem;
			}
			h3 {
				font-size: 1.125rem;
				margin-bottom: 0.375rem;
			}
			p {
				color: var(--color-text-secondary);
				margin-bottom: 0.75rem;
			}
			a {
				color: var(--color-primary);
				text-decoration: none;
				transition: color var(--transition);
			}
			a:hover {
				color: var(--color-primary-hover);
			}
			hr {
				border: none;
				border-top: 1px solid var(--color-border);
				margin: 1.5rem 0;
			}

			/* ===== PAGE HEADER ===== */
			.page-header {
				display: flex;
				align-items: center;
				justify-content: space-between;
				flex-wrap: wrap;
				gap: 1rem;
				margin-bottom: 1.5rem;
			}
			.page-header h1 {
				margin-bottom: 0;
			}

			/* ===== CARDS ===== */
			.card {
				background: var(--color-surface);
				border: 1px solid var(--color-border);
				border-radius: var(--radius-lg);
				box-shadow: var(--shadow-sm);
				padding: 1.5rem;
			}
			.card + .card {
				margin-top: 1rem;
			}
			.card-header {
				display: flex;
				align-items: center;
				justify-content: space-between;
				margin-bottom: 1rem;
				padding-bottom: 0.75rem;
				border-bottom: 1px solid var(--color-border);
			}
			.card-header h2 {
				margin-bottom: 0;
			}

			/* ===== BUTTONS ===== */
			.btn {
				display: inline-flex;
				align-items: center;
				justify-content: center;
				gap: 0.375rem;
				padding: 0.5rem 1rem;
				border: 1px solid transparent;
				border-radius: var(--radius-md);
				font: inherit;
				font-size: 0.875rem;
				font-weight: 600;
				line-height: 1.4;
				cursor: pointer;
				transition: all var(--transition);
				text-decoration: none;
				white-space: nowrap;
			}
			.btn:hover {
				transform: translateY(-1px);
			}
			.btn:active {
				transform: translateY(0);
			}
			.btn-primary {
				background: var(--color-primary);
				color: #fff;
			}
			.btn-primary:hover {
				background: var(--color-primary-hover);
				color: #fff;
				box-shadow: var(--shadow-md);
			}
			.btn-secondary {
				background: var(--color-surface);
				border-color: var(--color-border);
				color: var(--color-text);
			}
			.btn-secondary:hover {
				background: var(--color-surface-hover);
			}
			.btn-success {
				background: var(--color-success);
				color: #fff;
			}
			.btn-danger {
				background: var(--color-danger);
				color: #fff;
			}
			.btn-danger:hover {
				filter: brightness(1.1);
				color: #fff;
			}
			.btn-outline {
				background: transparent;
				border-color: var(--color-border);
				color: var(--color-text-secondary);
			}
			.btn-outline:hover {
				border-color: var(--color-primary);
				color: var(--color-primary);
				background: var(--color-primary-light);
			}
			.btn-sm {
				padding: 0.35rem 0.75rem;
				font-size: 0.8rem;
			}
			.btn-group {
				display: flex;
				flex-wrap: wrap;
				gap: 0.5rem;
				align-items: center;
			}

			/* ===== TABLE ===== */
			.table-wrapper {
				background: var(--color-surface);
				border: 1px solid var(--color-border);
				border-radius: var(--radius-lg);
				box-shadow: var(--shadow-sm);
				overflow: hidden;
			}
			table {
				width: 100%;
				border-collapse: collapse;
			}
			th,
			td {
				padding: 0.75rem 1rem;
				text-align: left;
				border-bottom: 1px solid var(--color-border);
			}
			th {
				background: var(--color-primary);
				font-size: 0.78rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.05em;
				color: #fff;
			}
			tr:last-child td {
				border-bottom: none;
			}
			tr:hover td {
				background: rgba(59, 109, 152, 0.06);
			}

			/* Lien dans tableau : mÃªme ton que le bouton primary */
			table td a {
				color: var(--color-primary);
				font-weight: 600;
			}
			table td a:hover {
				color: var(--color-primary-hover);
			}

			/* ===== FORMS ===== */
			.form-card {
				background: var(--color-surface);
				border: 1px solid var(--color-border);
				border-radius: var(--radius-lg);
				box-shadow: var(--shadow-sm);
				padding: 2rem;
				max-width: 480px;
			}
			label {
				display: block;
				margin-bottom: 0.375rem;
				font-weight: 600;
				font-size: 0.875rem;
				color: var(--color-primary-hover);
			}
			input,
			select,
			textarea {
				width: 100%;
				padding: 0.6rem 0.75rem;
				border: 1px solid var(--color-border);
				border-radius: var(--radius-md);
				font: inherit;
				font-size: 0.9rem;
				color: var(--color-text);
				background: rgba(255, 255, 255, 0.5);
				transition: border-color var(--transition), box-shadow var(--transition);
			}
			input:focus,
			select:focus,
			textarea:focus {
				outline: none;
				border-color: var(--color-primary);
				box-shadow: 0 0 0 3px var(--color-primary-light);
			}
			.form-group {
				margin-bottom: 1.25rem;
			}
			.form-actions {
				display: flex;
				gap: 0.75rem;
				align-items: center;
				margin-top: 1.5rem;
				padding-top: 1.25rem;
				border-top: 1px solid var(--color-border);
			}

			/* ===== ALERTS ===== */
			.alert {
				padding: 0.875rem 1rem;
				border-radius: var(--radius-md);
				border-left: 4px solid;
				margin-bottom: 1rem;
				font-size: 0.9rem;
			}
			.alert-info {
				background: var(--color-primary-light);
				border-color: var(--color-primary);
				color: #1e3a5f;
			}

			/* ===== BADGES ===== */
			.badge {
				display: inline-flex;
				align-items: center;
				padding: 0.2rem 0.6rem;
				border-radius: 999px;
				font-size: 0.75rem;
				font-weight: 700;
			}
			.badge-primary {
				background: var(--color-primary-soft);
				color: #1e3f5a;
			}

			/* ===== INFO LIST ===== */
			.info-list {
				list-style: none;
			}
			.info-list li {
				padding: 0.5rem 0;
				border-bottom: 1px solid var(--color-border);
				display: flex;
				align-items: center;
				gap: 0.5rem;
				font-size: 0.9rem;
			}
			.info-list li:last-child {
				border-bottom: none;
			}
			.info-label {
				font-weight: 600;
				color: var(--color-primary-hover);
				min-width: 140px;
			}

			/* ===== EMPTY STATE ===== */
			.empty-state {
				text-align: center;
				padding: 2rem 1rem;
				color: var(--color-text-secondary);
			}
			.empty-state p {
				font-size: 0.95rem;
				margin-bottom: 1rem;
			}

			/* ===== DASHBOARD ===== */
			.dashboard-hero {
				background: linear-gradient(135deg, #3b6d98 0%, #28394e 100%);
				border-radius: var(--radius-xl);
				padding: 2.5rem;
				color: #fff;
				margin-bottom: 2rem;
			}
			.dashboard-hero h1 {
				color: #fff;
				font-size: 2rem;
			}
			.dashboard-hero p {
				color: rgba(255, 255, 255, 0.75);
			}
			.dashboard-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
				gap: 1rem;
			}
			.dashboard-card {
				background: var(--color-surface);
				border: 1px solid var(--color-border);
				border-radius: var(--radius-lg);
				padding: 1.25rem;
				text-decoration: none;
				color: var(--color-text);
				transition: all var(--transition);
			}
			.dashboard-card:hover {
				border-color: var(--color-primary);
				box-shadow: var(--shadow-md);
				transform: translateY(-2px);
				color: var(--color-text);
			}
			.dashboard-card strong {
				display: block;
				font-size: 1.05rem;
				margin-bottom: 0.25rem;
				color: var(--color-primary-hover);
			}
			.dashboard-card span {
				font-size: 0.875rem;
				color: var(--color-text-secondary);
			}

			/* ===== SEARCH ===== */
			.search-section {
				margin-bottom: 2rem;
			}
			.search-section h2 {
				font-size: 1.1rem;
				margin-bottom: 0.75rem;
				padding-bottom: 0.5rem;
				border-bottom: 2px solid var(--color-primary-soft);
			}

			/* ===== DELETE ===== */
			.delete-inline {
				display: inline;
			}

			/* ===== UTILITIES ===== */
			.mt-1 {
				margin-top: 0.5rem;
			}
			.mt-2 {
				margin-top: 1rem;
			}
			.mt-3 {
				margin-top: 1.5rem;
			}
			.mb-0 {
				margin-bottom: 0;
			}
			.mb-1 {
				margin-bottom: 0.5rem;
			}
			.mb-2 {
				margin-bottom: 1rem;
			}
			.text-muted {
				color: var(--color-text-secondary);
			}
			.text-sm {
				font-size: 0.85rem;
			}

			/* ===== RESPONSIVE ===== */
			@media(max-width: 768px) {
				.app-header__inner {
					height: auto;
					padding: 0.75rem 0;
					flex-wrap: wrap;
				}
				.header-search {
					flex: 1 1 100%;
					order: 3;
				}
				.page-header {
					flex-direction: column;
					align-items: flex-start;
				}
				.form-card {
					padding: 1.25rem;
				}
				table,
				thead,
				tbody,
				th,
				td,
				tr {
					display: block;
				}
				thead {
					display: none;
				}
				tr {
					margin-bottom: 0.75rem;
					border: 1px solid var(--color-border);
					border-radius: var(--radius-md);
				}
				td {
					display: flex;
					justify-content: space-between;
					padding: 0.625rem 1rem;
					border-bottom: 1px solid var(--color-border);
				}
				td:last-child {
					border-bottom: none;
				}
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(8px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}
			.app-main > .container {
				animation: fadeIn 0.3s ease;
			}
		</style>
	{% endblock %}

	{% block javascripts %}
		{% block importmap %}
			{{ importmap('app') }}
		{% endblock %}
	{% endblock %}
</head>
<body>
	<div class="app-shell">
		<header class="app-header">
			<div class="container app-header__inner">
				<a class="app-brand" href="{{ path('app_dashboard') }}">ðŸ§¹ EasyCleanESAT</a>
				<form class="header-search" action="{{ path('app_search') }}" method="GET">
					<input type="text" name="q" placeholder="Rechercher un client, site, zone, contrat..." value="{{ app.request.query.get('q') }}">
					<button type="submit" class="btn btn-sm">Rechercher</button>
				</form>
				<nav class="header-nav">
					<a class="btn btn-sm" href="{{ path('app_client_index') }}">Clients</a>
					{% if app.request.attributes.get('_route') != 'app_dashboard' %}
						<a class="btn btn-sm" href="{{ path('app_dashboard') }}">Tableau de bord</a>
					{% endif %}
				</nav>
			</div>
		</header>

		<main class="app-main">
			<div class="container"> {% block body %}{% endblock %}
				</div>
			</main>

			<footer class="app-footer">
				<div class="container">
					EasyCleanESAT &copy;
					{{ "now"|date("Y") }}
					â€” DÃ©veloppÃ© par Marius, Max, Estelle &amp; Benjamin
				</div>
			</footer>
		</div>
	</body>
</html>
